# $Id: Makefile,v 1.7 2008/01/05 20:34:56 source Exp source $
CC = gcc
CFLAGS = -std=c99 -g -W -Wall -O -fPIC -shared
LDFLAGS = -nostdlib -shared
LIBS = -lgcc -lc -ldl

all: libhttpcacheopen.so libhttpcacheopen.debug.so

libhttpcacheopen.so: wrapper.c md5.c cleanpath.c cacheopen.c Makefile
	$(CC) $(CFLAGS) $(LDFLAGS) -o $@ $(LIBS) wrapper.c

libhttpcacheopen.debug.so: wrapper.c md5.c cleanpath.c cacheopen.c Makefile
	$(CC) -DDEBUG $(CFLAGS) $(LDFLAGS) -o $@ $(LIBS) wrapper.c

clean:
	rm -f libhttpcacheopen.debug.so libhttpcacheopen.so libhttpcacheopen.debug.so
